# 역할, 책임, 협력
---

> 우리 모두를 합친 것보다 더 현명한 사람은 없다. - 켄 블랜차드

- 인간의 행동
    - 타인과의 협력이 결정
    - 협력을 무시한 채 각 개인의 반응을 독립적으로 예상하고 관찰하는 것은 무의미
    - 협력에 얼마나 적절한지에 따라 행동의 적합성이 결정
    - 협력이라는 문맥이 인간의 행동 방식을 결정
- 객체의 행동
    - 협력이라는 문맥이 객체의 행동 방식을 결정
    - 객체지향에서 흔한 실수는 협력이라는 문맥을 고려하지 않은 채 객체가 가져야 할 상태와 행동부터 고민

-> 객체지향에서 중요한 것은 개별 객체가 아닌 객체 사이에 이뤄지는 협력이다.

# 협력
---

## 요청하고 응답하며 협력하는 사람들
---

- 협력
    - 요청과 응답으로 연결되는 네트워크
    - 문제를 직면하면 혼자만의 힘으로 해결하기 어렵기 때문에 해결 과정에 여러 사람이 참여
    - 요청과 응답의 연쇄적인 흐름이 발생

-> **협력**은 한 사람이 다른 사람에게 도움을 **요청**할 때 시작

## 재판 속의 협력
---

> 객체지향 패러다임은 동일한 목적을 달성하기 위해 협력하는 객체들의 공동체

하트 잭 재판에서는 객체들이 하트 잭의 재판이라는 동일한 목적을 달성하기 위해 협력하고 있다.

- 누군가 왕에게 재판을 **요청**
- 왕이 하얀 토끼에게 증인을 부를 것을 **요청**
- 토끼는 모자 장수에게 증인석으로 입장할 것을 **요청**
- 모자 장수는 토끼의 요청에 **응답**
- 모자 장수의 입장은 토끼가 왕에게 **응답**한것으로 봐도 됨
- 왕은 모자 장수에게 증언을 **요청**
- 모자 장수는 증언으로 왕의 요청에 **응답**

-> 하트 잭 제판에서 보여주는 협력 관계의 **요청**과 **응답**의 연쇄

# 책임
---

> 객체지향의 세계에서 어떤 객체가 어떤 요청에 대해 대답해 줄 수 있거나 , 적절한 행동을 할 의무가 있는 경우 해당 객체가 **책임**을 가진다고 말함

- 왕
    - '재판을 수행하라'라는 요청에 응답해야 하므로 '재판을 수행할' 책임
- 토끼
    - '목격자를 불러오라'라는 요청에 응답해야 하므로 '목격자를 불러올' 책임
- 모자 장수
    - '증인석에 입장'하고 '증언할' 책임

-> **책임**은 객체지향 설계에서 가장 중요한 **재료**다.

## 책임의 분류
---

- 객체의 책임
    - 객체가 무엇을 알고 있는가(knowing)
        - 객체를 생성하거나 계산을 하는 등의 스스로 하는것
        - 다른 객체의 행동을 시작시키는 것
        - 다른 객체의 활동을 제어하고 조절하는 것
    - 객체가 무엇을 할 수 있는가(doing)
        - 개인적인 정보에 관해 아는 것
        - 관련된 객체에 관해 아는 것
        - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

---

- 왕
    - 다른 객체들의 활동을 제어하고 조율
    - doing
- 토끼
    - 목격자가 모자 장수라는 사실을 알고 있음
    - 모자 장수가 증인석에 입장하도록 요청
    - knowing + doing
- 모자 장수
    - 자신이 알고 있는 사실을 스스로 증언
    - knowing + doing

-> 객체의 책임은 일반적으로 외부에서 접근 가능한 공용 서비스의 관점에서 이야기

-> 객체의 공용 인터페이스(public interface)를 구성

# 역할
---

> 책임의 집합은 객체가 협력 안에서 수행하는 **역할**을 암시

- 재사용 가능하고 유연한 객체지향 설계를 낳는 매우 중요한 구성요소

## 판사와 증인
---

앨리스에서 **왕**과 **모자 장수**는 **판사**와 **증인**의 역할이며 하나의 협력으로 추상화할 수 있다.

- 왕자리에 여왕이 와도 이상하지 않고 모자 장수 자리에 앨리스가 와도 이상하지 않다.
- 역할은 협력 내에서 다른 객체로 대체할 수 있음을 나타내는 일종의 표식

## 역할의 장점
---

- 단순성
- 유연성
- 재사용성

-> 역할 자체가 객체의 추상화이기 때문에 역할이 협력을 추상적으로 만들 수 있다.

# 객체의 모양을 결정하는 협력
---

객체가 상태의 일부로 데이터를 포함하는 것은 사실이지만 데이터는 단지 객체가 행위를 수행하는 데 필요한 재료일 뿐이다. <br>
객체에서 중요한 것은 **책임**

객체지향에서 클래스와 클래스 간의 관계에 중점을 두는 것은 선입견이다.<br>
중요한 것은 정적인 클래스가 아니라 **협력**에 참여하는 **동적인 객체**이며, 클래스는 단지 시스템에 필요한 객체를 표현하고 생성하기 위해<br>
프로그래밍 언어가 제공하는 **구현 메커니즘**이라는 사실을 기억하라

## 협력에 따라 흐르는 객체의 책임
---

- 협력을 설계
    - 설계에 참여하는 객체들이 주고받을 요청과 응담의 흐름을 결정
- 객체에 책임을 할당
    - 객체가 외부에 제공하게 될 행동

> 책임(행동) -> 데이터 -> 클래스

협력이라는 문맥 안에서 객체를 생각하는 것은 올바른 객체지향 애플리케이션을 구현하는 것과 관련된 모든 것이다.

객체지향 시스템에서 가장 중요한 것은 충분히 **자율적**인 동시에 충분히 **협력적**인 객체를 창조하는 것<br>
객체를 충분히 협력적으로 만든 후 협력이라는 문맥 안에서 객체를 충분히 자율적으로 반드는 것

# 객체지향 설계 기법
---

1. 책임 주도 설계
    - 협력에 필요한 책임들 식별하고 적합한 객체에게 책임을 할당하는 방식
2. 디자인 패턴
    - 반복적으로 사용하는 해결 방법을 정의해 놓은 설계 탬플릿 모음
3. 테스트 주도 개발
    - 테스트를 먼저 작성하고 테스트를 통과하는 구체적인 코드를 추가하면서 애플리케이션을 완성해가는 방식